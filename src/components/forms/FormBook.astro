---
---

<style>
  input, textarea, select {
    width: 100%;
    border-radius: var(--radius-lg);
    border-style: var(--tw-border-style);
    border-width: 1px;
    border-color: var(--color-gray-300);
    padding-inline: calc(var(--spacing) * 4);
    padding-block: calc(var(--spacing) * 3);
  }
  
  input:focus, textarea:focus, select:focus {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    --tw-ring-color: var(--color-brand-green);
    --tw-outline-style: none;
    outline-style: none;
  }
  
  button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    background-color: var(--color-gray-300);
  }
  
  button:disabled svg {
    opacity: 0.5;
  }
  
  .required-field::after {
    content: " *";
    color: red;
  }
</style>

<form action="https://api.web3forms.com/submit" method="POST">
  <input type="hidden" name="access_key" value="ea3a8db2-5722-43ce-a6d3-8fff73904449">
  
  <div class="flex flex-col gap-8 mx-auto max-w-md">
    <div>
      <label for="name" class="required-field">Jméno a příjmení</label>
      <div class="mt-2">
        <input type="text" name="name" id="name" required />
      </div>
    </div>

    <div>
      <label for="email" class="required-field">E-mail</label>
      <div class="mt-2 grid grid-cols-1">
        <input type="email" name="email" id="email" required />
      </div>
    </div>

    <div>
      <label for="phone" class="required-field">Telefon</label>
      <div class="mt-2">
        <input type="text" name="phone" id="phone" required />
      </div>
      <small class="italic text-gray-500">Zavoláme vám pro potvrzení rezervace</small>
    </div>

    <div>
      <label for="size">Velikost a cena</label>
      <div class="mt-2">
        <select name="size" id="size" required>
          <option value="">Vyberte velikost</option>
          <option value="malý 15-25cm 190-320kč">malý 15-25cm 190-320kč</option>
          <option value="střední 25-35cm 380-680kč">střední 25-35cm 380-680kč</option>
          <option value="větší 36-46cm 580-880kč">větší 36-46cm 580-880kč</option>
          <option value="nad 55 cm cena od 1100kč">nad 55 cm cena od 1100kč</option>
        </select>
      </div>
    </div>

    <div>
      <label for="message" class="required-field">Co přesně si přejete zhotovit</label>
      <div class="mt-2">
        <textarea
          name="message"
          id="message"
          rows="4"
          required
          placeholder="Uveďte zde veškeré detaily a požadavky"
        ></textarea>
      </div>
    </div>

    <div>
      <button type="submit" class="button button-green group !px-8">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 -rotate-45 -mt-1 inline-block mr-1 group-hover:rotate-0 transition duration-300"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"
          ></path>
        </svg>
        Odeslat
      </button>
    </div>
  </div>
</form>

<script is:inline>
  document.addEventListener('astro:page-load', () => {
    const form = document.querySelector('form');
    const inputs = form.querySelectorAll('input:not([type="hidden"]), textarea');
    const submitButton = form.querySelector('button[type="submit"]');
    
    function checkFormValidity() {
      let allValid = true;
      inputs.forEach(input => {
        if (!input.value.trim()) {
          allValid = false;
        }
      });
      submitButton.disabled = !allValid;
    }
    
    inputs.forEach(input => {
      input.addEventListener('input', checkFormValidity);
      input.required = true;
    });
    
    checkFormValidity();
    
    const urlParams = new URLSearchParams(window.location.search);
    const message = urlParams.get('message');
    if (message) {
      const messageField = document.getElementById('message');
      if (messageField) {
        messageField.value = decodeURIComponent(message.replace(/\+/g, ' '));
        checkFormValidity();
      }
    }
  });
</script>
